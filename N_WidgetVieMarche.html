<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Export qui marche</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <h2>Barre de progression personnalisable</h2>

  <div class="Progress_Container">
    <div id="Progress_Barre" class="ProgressBarre">0%</div>
  </div>

  <div class="Control">
    <label>
      Pourcentage :
      <input type="number" id="progress-input" min="0" max="100" value="50"> %
    </label>
    <br><br>
    <label>
      Couleur :
      <input type="color" id="color-input" value="#4caf50">
    </label>
    <br><br>
    <button id="Mettre-A-Jour">Mettre à jour</button>
    <button id="export-url-btn">Exporter l'URL</button>
    <button id="export-bar-btn">Exporter la barre</button>
  </div>

  <script>
    const progressBar = document.getElementById('ProgressBarre');
    const progressInput = document.getElementById('progress-input');
    const colorInput = document.getElementById('color-input');
    const updateBtn = document.getElementById('Mettre-A-Jour');
    const exportUrlBtn = document.getElementById('export-url-btn');
    const exportBarBtn = document.getElementById('export-bar-btn');

    // Fonction pour mettre à jour la barre
    function updateBar() {
                          const progress = progressInput.value;
                          const color = colorInput.value;
                          progressBar.style.width = progress + "%";
                          progressBar.textContent = progress + "%";
                          progressBar.style.backgroundColor = color;
                          }

    updateBtn.addEventListener('click', updateBar);

    // Exporter l'URL
    exportUrlBtn.addEventListener('click', () => {
                                                  const progress = progressInput.value;
                                                  const color = colorInput.value.replace("#", "");
                                                  const url = window.location.origin + window.location.pathname +
                                                            `?progress=${progress}&color=${color}`;
                                                  prompt("Voici l’URL de ta barre :", url);
                                                  });

    // Exporter uniquement la barre (HTML minimal)
    exportBarBtn.addEventListener('click', () => {
                                                  const barHTML = `
                                                      <div class="Progress_Container">
                                                        <div class="Progress_Barre" style="width:${progressInput.value}%; background:${colorInput.value};">
                                                          ${progressInput.value}%
                                                        </div>
                                                      </div>`;
                                                  prompt("Copie ce code HTML :", barHTML);
                                                });

    // Lire les paramètres URL au chargement
    window.addEventListener('DOMContentLoaded', () => {
                                                        const params = new URLSearchParams(window.location.search);
                                                        const progress = params.get('progress');
                                                        const color = params.get('color');
                                                        if (progress !== null) {progressInput.value = progress;}
                                                        if (color !== null)    {colorInput.value = "#" + color;}
                                                        updateBar();
                                                      });
  </script>

</body>
</html>
