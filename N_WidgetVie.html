<!-- original : https://codepen.io/SeanNorton/pen/LWBXQL -->
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="fr">
    <meta name="google" content="notranslate">
    <title>Widget Notion</title>

    <style>
.progress-container {
                      width: 100%; /**/
                      background: #eee; /**/
                      border-radius: 10px; /**/
                      overflow: hidden; /**/
                      height: 30px; /**/
                    }

.progress-bar {
              height: 100%;
              background: #4caf50; /**/
              text-align: center; /**/
              line-height: 30px; /* centre le texte verticalement */
              color: white; /**/
              font-weight: bold; /**/
              width: 0%; /* sera ajusté en JS */
            }
    </style>
</head>
<body>

<div>Définition d'une valeur en % et rappel dans un script pour la modifier (70=>30) */ </div>
<div>
    <label for="file">File progress:<br></label>
    <progress id="file" max="100" value="70">70%</progress>
</div>

<script>
  // Récupérer la barre
  let barre = document.getElementById("file");
  // Exemple : mettre la valeur à 30
  barre.value = 30;
</script>
<br>

<div>Définition d'une valeur en % en fonction d'une valeur qui se modifie regulièrement (chaque jour) </div>
<div><progress id="mois" max="100" value="0"></progress></div>
<div><span id="mois-valeur"></span></div>

<script>
function progressionMois() {
                            let today = new Date();
                            let totalJours = new Date(today.getFullYear(), today.getMonth()+1, 0).getDate();  
                            let pourcentage = (today.getDate() / totalJours) * 100;

                            // Obtenir le mois en toutes lettres (français)
                            let MoisLong = today.toLocaleDateString("fr-FR", { month: 'long' });

                            // Mettre à jour la barre
                            document.getElementById("mois").value = pourcentage;

                            // Afficher le pourcentage arrondi à côté
                            document.getElementById("mois-valeur").innerText = 
                                    //Entourer la chaîne avec des backticks ` `, pour eviter le + à repetition et utiliser les template string
                                    `Le ${today.getDate()}, on est à ${Math.round(pourcentage)}% du mois de ${MoisLong}`;
                            }

progressionMois();
</script>
<br>
<div>Ecriture d'une valeur en % dans, et à coté, de la barre </div>
<div class="progress-container">
  <div class="progress-bar" id="mois-bar">
    <span id="mois-texte"></span>
  </div>
</div>
<div><span id="mois-valeur"></span></div>
    
<script>
function progressionMois() {
                              let today = new Date();
                              let totalJours = new Date(today.getFullYear(), today.getMonth() + 1, 0).getDate(); 
                              let pourcentage = (today.getDate() / totalJours) * 100;
                              let MoisLong = today.toLocaleDateString('fr-FR', { month: 'long' });
                              let bar = document.getElementById("mois-bar");
                              bar.style.width = pourcentage + "%";
                              document.getElementById("mois-texte").innerText = 
                                      `${Math.round(pourcentage)} % de ${MoisLong}`;
                              document.getElementById("mois-valeur").innerText =                                   
                                    `Le ${today.getDate()}, on est à ${Math.round(pourcentage)}% du mois de ${MoisLong}`;
                            }
progressionMois();
</script>
    
</body>
</html>
